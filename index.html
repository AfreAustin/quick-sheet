<!DOCTYPE html>
<html xmlns=http://www.w3.org/1999/xhtml lang="en">
<head>
  <title>Quick Sheet</title>
  <!-- <base href="https://www.quicksheet.com/" target="_blank"/> -->
<!--  <link media="screen and (max-width: 600px)" href="styles/x-small.css" type="text/css" rel="stylesheet" />
  <link media="screen and (min-width: 600px)" href="styles/small.css" type="text/css" rel="stylesheet" />
  <link media="screen and (min-width: 768px)" href="styles/medium.css" type="text/css" rel="stylesheet" /> -->
  <link href="styles.css" type="text/css" rel="stylesheet" /> <!-- laptops/desktops -->
<!--  <link media="screen and (min-width: 1200px)" href="styles/x-large.css" type="text/css" rel="stylesheet" /> -->
  
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="Keywords" content="Reference">
  <meta name="Description" content="Reference for various computer languages and concepts" />
</head>
<body>
  <header class="site-header">
    <strong class="header-title" id="nav-title">
      <!--<img src="logo.png" alt="Quick Sheets Logo" /> -->
      <!--<button class="side-toggle" id="nav-toggle" onclick="toggleNav()"></button>-->
      QUICK SHEETS
    </strong>
    <search class="header-search">
      <input id="dir-search" type="search" placeholder="Search HTML" oninput="filterDirectory()" />
    </search>
    <address>created by AfreAustin</address>
  </header>

  <div class="site">
    <aside class="side-nav" id="side-nav">
      <nav id="nav-content">
        <details class="nav-item" open="open">
          <summary>Frontend Web Dev</summary>
          <ul class="nav-list">
            <li>HTML</li>
            <li>&nbsp; XML</li>
            <li>&nbsp; XHTML</li>
            <li>&nbsp; LaTeX</li>
            <li>&nbsp; Razor</li>
            <li>CSS</li>
            <li>&nbsp; SASS</li>
            <li>&nbsp; SCSS</li>
            <li>&nbsp; BootStrap</li>
            <li>&nbsp; Material</li>
            <li>JavaScript</li>
            <li>&nbsp; TypeScript</li>
            <li>&nbsp; Dart</li>
          </ul>
        </details>
        <details class="nav-item">
          <summary>Backend Web Dev</summary>
          <ul class="nav-list">
            <li>PHP</li>
            <li>&nbsp; ASP.NET</li>
            <li>SQL</li>
            <li>&nbsp; MySQL</li>
            <li>&nbsp; MongoDB</li>
          </ul>
        </details>
        <details class="nav-item">
          <summary>Data Analysis</summary>
          <ul class="nav-list">
            <li>Python</li>
            <li>MATLAB</li>
            <li>&nbsp; Simulink</li>
            <li>Mathematica</li>
          </ul>
        </details>
        <details class="nav-item">
          <summary>Assembly Language</summary>
          <ul class="nav-list">
            <li>Assembly</li>
            <li>PIC32</li>
            <li>Verilog</li>
            <li>MIPS</li>
          </ul>
        </details>
        <details class="nav-item">
          <summary>Embedded System</summary>
          <ul class="nav-list">
            <li>Altera Quartus</li>
            <li>MPLAB</li>
            <li>Xilinx Vivado</li>
            <li>Renesas e2 Studio</li>
          </ul>
        </details>
      </nav>
    </aside>

    <main class="reference" id="reference">
      <article>
        <hgroup class="ref-header" id="ref-header">
          <cite><a class="ref-link" id="ref-link" href="#">Source</a></cite>
          <h1 id="ref-title">SELECT AN ITEM IN THE DIRECTORY</h1>
          <h2 id="ref-desc"></h2>
        </hgroup>
        <p id="ref-info"></p>
      </article>
    </main>

    <dl class="directory" id="directory">
      <section class="category">
        <h3 class="category-title">Information</h3>
        <div class="term-bubble">
          <dt class="term">Source</dt>
          <dd class="def">Original Reference</dd>
        </div>
      </section>
    </dl>
  </div>
  <script>
    // adds onclick event to all <li> elements in side navigation
    // click event swaps reference sheets
    const listItems = document.querySelectorAll("#side-nav li");
    for (let i = 0; i < listItems.length; i++) {
      listItems.item(i).addEventListener("click", function(){
        let title = listItems.item(i).innerText.trim().split(" ");
        let sheet = title[0];

        document.getElementById("dir-search").placeholder = "Search " + sheet;
      }, false);
    }

    // only allow one open <details> tag
    /*
    let nav = document.getElementById('nav-content');
    nav.addEventListener('toggle', function (event) {
      if (!event.target.open) return;

      var dropdowns = nav.querySelectorAll('.nav-item[open]');
      Array.prototype.forEach.call(dropdowns, function (dropdown) {
        if (dropdown === event.target) return;
        dropdown.removeAttribute('open');
      });
    }, true);
    */

    // convert terms from JSON to objects
    let temp = {
      category: "New Section",
      term: "Stuff",
      definition: "Stuff define"
    };
    let temp2 = {
      category: "Actual",
      term: "Command3",
      definition: "Short Description3"
    };
    const refTerms = [temp, temp2, temp2, temp2, temp2, temp2, temp2, temp2, temp2, temp2, temp2, temp2, temp2, temp2, temp2, temp2, temp2, temp2, temp2, temp2, temp2, temp2, temp2, temp2, temp2, temp2, temp2];

    // populate directory with reference's terms (ES6+)
    let directory = document.getElementById("directory");
    refTerms.forEach(function(term) {
      console.log(term.category);
      let sections = directory.children;
      let exists = false;

      for (i = 0; i < sections.length; i++) {
        let category = sections.item(i).firstElementChild.innerText; 
        if (category.toUpperCase() == term.category.toUpperCase()) exists = true;
      }

      if (exists == false) {
        const categoryElem = document.createElement("section");
        const catTitleElem = document.createElement("h3");

        categoryElem.setAttribute("class", "category");
        catTitleElem.setAttribute("class", "category-title");

        directory.appendChild(categoryElem);
        categoryElem.appendChild(catTitleElem);
        catTitleElem.innerText = term.category;
      }

      for (i = 0; i < sections.length; i++) {
        if (term.category.toUpperCase() == sections.item(i).firstElementChild.innerText.toUpperCase()) {
          const bubbleElem = document.createElement("div");
          const termElem = document.createElement("dt");
          const defElem = document.createElement("dd");

          bubbleElem.setAttribute("class", "term-bubble");
          termElem.setAttribute("class", "term");
          defElem.setAttribute("class", "def");

          sections.item(i).appendChild(bubbleElem);
          bubbleElem.appendChild(termElem);
          termElem.innerText = term.term;
          bubbleElem.appendChild(defElem);
          defElem.innerText = term.definition;
        }
      }
    });
    
    // adds onclick event to all elements with term-bubble class
    // click event swaps reference article
    const listTerms = document.getElementById("directory").getElementsByClassName("term-bubble");
    for (let i = 0; i < listTerms.length; i++) {
      let currBubble = listTerms.item(i);
      currBubble.addEventListener("click", function(){
        let currTerm = currBubble.children;

        document.getElementById("ref-title").innerText = currTerm.item(0).innerText;
        document.getElementById("ref-desc").innerText = currTerm.item(1).innerText;
      }, false);
    }

    // toggle side navigation based on current width
    // if currently shown, hide all elements except toggle button
    // if currently collapsed, show all elements  
    function toggleNav() {
      let sideNav = document.getElementById("side-nav");
      let nav = document.getElementById("nav-content");
      let foot = document.getElementById("nav-footer");

      let currWidth = window.getComputedStyle(sideNav).width;
      
      if (currWidth == "200px") {
        nav.style.display = "none";
        foot.style.display = "none";
        sideNav.style.flexBasis = "50px";
      } else {
        nav.style.display = "initial";
        foot.style.display = "initial";
        sideNav.style.flexBasis = "200px";
      }

      return;
    }

    function toggleTerm() {
      let article = document.getElementById("reference");
      let head = document.getElementById("ref-header");
      let info = document.getElementById("ref-info");
      let ref = document.getElementById("detail-ref");

      let currWidth = window.getComputedStyle(article).width;
      
      if (currWidth != "50px") {
        head.style.display = "none";
        info.style.display = "none";
        ref.style.display = "none";
        article.style.flexBasis = "50px";
      } else {
        head.style.display = "initial";
        info.style.display = "initial";
        ref.style.display = "initial";
        article.style.flexBasis = "40%";
      }

      return;
    }

    // filter reference directory to show what is searched
    function filterDirectory() {
      let search = document.getElementById("dir-search").value;
      let directory = document.getElementById("directory").getElementsByClassName("term");

      for (let i = 0; i < directory.length; i++) {
        let matching = directory.item(i).innerText.toUpperCase().match(search.toUpperCase());
        if (matching) directory.item(i).parentElement.style.display = "initial";
        else directory.item(i).parentElement.style.display = "none";
      }

      return;
    }
  </script>
  <noscript>
    JavaScript not supported :/
    Download the print reference instead...
  </noscript>
</body>
</html>